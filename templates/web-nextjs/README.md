# ADVL Template: web-nextjs
## Next.js + Tailwind CSS + Supabase + Vercel

---

## Stack

| Concern | Technology |
|---|---|
| Runtime | Node.js 22 |
| Framework | Next.js 15 (App Router) |
| Language | TypeScript 5 (strict) |
| ORM | Prisma |
| Database | PostgreSQL 16 (Supabase managed) |
| Auth | Supabase Auth |
| Styling | Tailwind CSS 4 |
| UI Components | shadcn/ui |
| State (client) | Zustand |
| State (server) | TanStack Query |
| Email | Resend |
| File Storage | Supabase Storage |
| Deployment | Vercel |
| CI/CD | GitHub Actions |
| Testing | Vitest (unit) + Playwright (e2e) |
| Package Manager | pnpm |

---

## What This Template Generates

When initialized via ADVL, this template produces:

1. **Full Next.js 15 App Router scaffold** with TypeScript strict mode
2. **Supabase Auth** fully configured (Email/Password + OAuth ready)
3. **Prisma** connected to Supabase PostgreSQL with initial migration
4. **Three environments**: `dev`, `staging`, `production` with separate Supabase projects
5. **Security baseline**: CORS config, rate limiting middleware, input validation (Zod), CSP headers
6. **CI/CD pipeline**: GitHub Actions for test → lint → build → deploy on PR and main
7. **Secrets management**: `.env.local`, `.env.example`, Vercel environment variable setup
8. **shadcn/ui** initialized with base theme
9. **Initialized DCM.yaml** with stack declaration pre-filled

---

## Environment Variables Required

```bash
# Supabase
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=

# Database
DATABASE_URL=

# Auth (if using OAuth)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# Email
RESEND_API_KEY=

# App
NEXT_PUBLIC_APP_URL=
```

---

## Foundation Files (Never Modify Without Explicit ADVL Instruction)

- `src/lib/supabase/` — Supabase client configuration
- `src/lib/auth/` — Auth helpers and middleware
- `src/middleware.ts` — Route protection and rate limiting
- `prisma/schema.prisma` — Base schema (users, sessions)
- `.github/workflows/` — CI/CD pipeline
- `next.config.ts` — Security headers and CSP

---

## Getting Started (After ADVL Init)

1. Copy `.env.example` to `.env.local` and fill in values
2. Run `pnpm install`
3. Run `pnpm db:migrate` to apply the initial migration
4. Run `pnpm dev` to start the development server
5. Define your first use case and let ADVL build it

---

*ADVL Template: web-nextjs — Version 1.0*
*This template is generated by ADVL. Do not modify the foundation layer without explicit instruction.*
