# ADVL Template: mobile-expo
## Expo React Native (iOS + Android)

---

## Stack

| Concern | Technology |
|---|---|
| Runtime | Node.js 22 |
| Framework | Expo SDK 52 (React Native) |
| Language | TypeScript 5 (strict) |
| Auth | Supabase Auth |
| State (client) | Zustand |
| State (server) | TanStack Query |
| API Client | Axios (typed) |
| Navigation | Expo Router (file-based) |
| Styling | NativeWind (Tailwind for RN) |
| UI Components | React Native Paper or custom |
| Push Notifications | Expo Notifications + FCM/APNs |
| Storage (local) | Expo SecureStore (secrets), AsyncStorage (data) |
| File Storage | Supabase Storage |
| Build | EAS Build |
| Submit | EAS Submit |
| CI/CD | GitHub Actions + EAS |
| Testing | Jest + Detox (e2e) |
| Package Manager | pnpm |

---

## What This Template Generates

1. **Expo SDK 52 scaffold** with TypeScript strict mode and Expo Router
2. **Supabase Auth** configured for mobile (session persistence via SecureStore)
3. **Typed API client** with interceptors for auth token injection and refresh
4. **Three environments**: `dev`, `staging`, `production` with EAS build profiles
5. **Security baseline**: SecureStore for tokens, certificate pinning config, biometric auth hooks
6. **Push notification infrastructure**: token registration, background handler setup
7. **CI/CD pipeline**: GitHub Actions triggering EAS Build on PR and main
8. **OTA updates**: Expo Updates configured for staging and production channels
9. **Initialized DCM.yaml** with stack declaration pre-filled

---

## Environment Configuration

EAS uses `eas.json` build profiles and Expo's `extra` config for environment variables:

```json
{
  "build": {
    "development": {
      "developmentClient": true,
      "distribution": "internal"
    },
    "staging": {
      "distribution": "internal",
      "env": { "APP_ENV": "staging" }
    },
    "production": {
      "distribution": "store",
      "env": { "APP_ENV": "production" }
    }
  }
}
```

Required secrets in EAS:
```
EXPO_PUBLIC_SUPABASE_URL
EXPO_PUBLIC_SUPABASE_ANON_KEY
EXPO_PUBLIC_API_URL
```

---

## Foundation Files (Never Modify Without Explicit ADVL Instruction)

- `lib/supabase.ts` — Supabase client with SecureStore adapter
- `lib/api/client.ts` — Axios instance with auth interceptors
- `lib/auth/` — Auth hooks and session management
- `app/_layout.tsx` — Root layout with auth provider
- `eas.json` — EAS build profiles
- `.github/workflows/` — CI/CD pipeline
- `app.config.ts` — Expo app configuration

---

## Getting Started (After ADVL Init)

1. Install EAS CLI: `npm install -g eas-cli`
2. Run `pnpm install`
3. Run `eas login` and `eas build:configure`
4. Copy `.env.example` to `.env.local` and fill in values
5. Run `pnpm start` to launch Expo dev server
6. Define your first use case and let ADVL build it

---

*ADVL Template: mobile-expo — Version 1.0*
*This template is generated by ADVL. Do not modify the foundation layer without explicit instruction.*
