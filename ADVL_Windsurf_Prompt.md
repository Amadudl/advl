# ADVL Template Integration — Windsurf Prompt

Paste this prompt into Windsurf to integrate all new templates into the ADVL repository.

---

```
You are operating inside the ADVL (AI Development Visual Language) repository.
Follow ALL rules in AGENTS.md and /rules/* without exception.

## Task: Add 14 New Stack Templates to the ADVL Repository

You must add the following 14 new templates to the /templates directory of this repository.
Each template requires a README.md following the exact structure of existing templates
(see templates/web-nextjs/README.md as the canonical reference).

After creating all templates, update README.md and AGENTS.md to reflect their existence.
Finally, create a DCM snapshot because this is a milestone: 14 templates added.

---

## DCM CHECK (Rule 1 — Non-Negotiable)

Before creating any file:
1. Read /schema/DCM.yaml
2. Check for any existing template entries or use cases covering "template creation"
3. If found: reuse. If not found: register the following use case before proceeding:

```yaml
- id: "UC-001"
  title: "Developer initializes a new project from an ADVL stack template"
  value: "Development teams can start new projects with a fully configured, production-ready
          foundation in under an hour, without rebuilding auth, CI/CD, or security baselines"
  status: planned
  visual_element_id: null
  actor: "Developer / Project founder"
  preconditions:
    - "Developer has selected a target platform and technology preference"
    - "ADVL CLI or agent is available"
  postconditions:
    - "Project scaffold is generated with correct stack"
    - "DCM.yaml is initialized with stack declaration"
    - "Foundation files are protected and immutable"
    - "First use case can be defined immediately"
  functions: []
  rules_applied:
    - USE_CASE_FIRST
    - NO_DUPLICATE
```

---

## Templates to Create

Create one folder per template under /templates/, each containing README.md.
All README files must follow this exact structure:

```
# ADVL Template: [template-id]
## [One-line description]

---

## Stack
[Table: Concern | Technology]

---

## Architecture
[Code block: folder/file structure with inline comments]

---

## What This Template Generates
[Numbered list: what gets generated]

---

## Foundation Files (Never Modify Without Explicit ADVL Instruction)
[List of protected files/dirs]

---

## Environment / Configuration (if applicable)
[Code block: env vars or config schema]

---

## Getting Started (After ADVL Init)
[Numbered steps]

---

*ADVL Template: [id] — Version 1.0*
*This template is generated by ADVL. Do not modify the foundation layer without explicit instruction.*
```

---

### GROUP A: Desktop Applications

**1. templates/desktop-wpf/README.md**
Platform: Windows desktop
Stack: .NET 8 + WPF + MVVM (CommunityToolkit.Mvvm) + EF Core 8 + SQLite/SQL Server
+ MahApps.Metro + Serilog + Microsoft.Extensions.DI + xUnit
Architecture: MVVM strict (Views = pure XAML, no code-behind logic)
Foundation: App.xaml.cs (DI), Infrastructure/Logging/, Infrastructure/Navigation/, Data/AppDbContext.cs
Config: appsettings.json with Database.ConnectionString, Logging.LogPath, App.Theme
CI: GitHub Actions → dotnet publish → portable ZIP + NSIS installer
Use cases: Windows-only rich client applications, ERP interfaces, industrial tools

**2. templates/desktop-avalonia/README.md**
Platform: Windows + macOS + Linux (cross-platform desktop)
Stack: .NET 8 + Avalonia UI 11 + ReactiveUI or CommunityToolkit.Mvvm + EF Core 8
+ SQLite + Semi.Avalonia/Fluent Theme + Serilog + Microsoft.Extensions.DI + xUnit
Architecture: MVVM strict, Platform abstraction layer (/Platform/Windows, /macOS, /Linux)
for OS dialogs, file paths, notifications
Foundation: App.axaml.cs, Platform/ interfaces and implementations, Data/AppDbContext.cs
CI: GitHub Actions matrix build (ubuntu, macos, windows runners)
Use cases: Developer tools, database browsers, cross-platform utilities

**3. templates/desktop-electron/README.md**
Platform: Windows + macOS + Linux via Electron
Stack: Electron 32 + TypeScript 5 + React 18 + Vite + Zustand + Tailwind CSS 4
+ better-sqlite3 (main process) + electron-store + electron-updater + electron-builder
+ Vitest + Playwright (Electron) + pnpm
Architecture: Main process (Node.js, DB, IPC handlers) / Renderer (React, no Node access)
/ Preload (context bridge — contextIsolation: true, nodeIntegration: false)
Typed IPC protocol file: /preload/index.ts exposes window.api with full TypeScript types
Foundation: main/index.ts (security settings), preload/index.ts (bridge), electron-builder.config.ts
CI: GitHub Actions → code sign → notarize (macOS) → release (NSIS/DMG/AppImage)
Use cases: Consumer apps requiring local data + auto-update, note apps, IDEs

---

### GROUP B: Platform-Specific / Extension

**4. templates/vscode-extension/README.md**
Platform: Visual Studio Code extension
Stack: TypeScript 5 + VS Code Extension API + React 18 + Vite (Webview)
+ Zustand + Tailwind CSS (scoped, VS Code vars) + esbuild + @vscode/test-electron
+ Mocha + @vscode/vsce + pnpm
Architecture: extension.ts (activate/deactivate + DI) / /commands / /providers
(TreeDataProvider, CodeLensProvider) / /panels (WebviewPanel) / /services
/ /webview (React app, separate Vite build)
Typed message protocol: src/messages/protocol.ts (ExtensionMessage + WebviewMessage unions)
Foundation: src/extension.ts (activation), esbuild.config.js, vite.config.ts,
package.json activationEvents + contributes sections
CI: GitHub Actions → @vscode/test-electron → vsce package → release .vsix
Use cases: Dev tools, language support, code generators, AI integrations in VS Code

**5. templates/browser-extension/README.md**
Platform: Chrome / Edge / Firefox (Manifest V3)
Stack: TypeScript 5 + Manifest V3 + React 18 + Vite + vite-plugin-web-extension
+ Tailwind CSS 4 + Zustand + chrome.storage (typed wrappers) + chrome.identity (OAuth2)
+ Vitest + Playwright (extension context) + pnpm
Architecture: /background (Service Worker) / /content (content scripts, minimal TS)
/ /popup (React) / /options (React) / /sidepanel (Chrome 114+) / /services
/ /storage (typed wrappers) / /messages (typed protocol)
Foundation: src/background/index.ts, src/messages/protocol.ts, src/storage/,
vite.config.ts (multi-entry build)
CI: GitHub Actions → zip (Chrome) + web-ext build (Firefox) → release
Use cases: Page scrapers, productivity tools, auth helpers, AI writing assistants

---

### GROUP C: Backend / Service Architectures

**6. templates/api-dotnet-minimal/README.md**
Platform: REST API / Microservice / BFF
Stack: .NET 8 + ASP.NET Core Minimal API + Vertical Slice Architecture
+ EF Core 8 + PostgreSQL 16 + JWT Bearer + FluentValidation + Scalar/OpenAPI
+ Serilog (JSON) + Redis (IMemoryCache / StackExchange.Redis) + HealthChecks
+ Docker + xUnit + WebApplicationFactory + FluentAssertions + NuGet
Architecture: /Features/[UseCaseName].cs (Request + Handler + Endpoint in one file)
Each vertical slice = one DCM use case
Foundation: Program.cs (middleware pipeline), Infrastructure/Auth/JwtConfig.cs,
Infrastructure/Persistence/AppDbContext.cs, Dockerfile, docker-compose.yml
CI: GitHub Actions → test → build → push Docker image
Use cases: Microservices, BFF layer, API-only backends, internal APIs

**7. templates/microservices-dotnet/README.md**
Platform: Multi-service distributed system
Stack: .NET 8 + ASP.NET Core Minimal API (per service) + YARP (API Gateway)
+ gRPC (sync inter-service) + RabbitMQ + MassTransit (async events)
+ Keycloak (OIDC) + EF Core 8 + PostgreSQL (per service, own DB)
+ Redis + OpenTelemetry (→ Jaeger + Prometheus + Grafana)
+ Serilog (→ Elasticsearch/Loki) + Kubernetes + Helm + Docker + NuGet
Architecture: Monorepo: /gateway + /services/[bounded-context] + /shared/contracts
(gRPC .proto + message types) + /shared/infrastructure + /infra/k8s + /infra/helm
Each service has its own /Features (vertical slices), /Domain, /Infrastructure/Messaging
Foundation: /gateway (routing config), /shared/contracts (.proto files, message contracts),
/infra/k8s + /infra/helm (Kubernetes), docker-compose.yml, per-service .github/workflows/
CI: Per-service GitHub Actions (path filters) → build only changed services
Use cases: Large SaaS platforms, enterprise systems, team-scale independent deployments

**8. templates/worker-service/README.md**
Platform: Background worker / daemon / job processor
Stack: .NET 8 + .NET Worker Service (IHostedService) + Quartz.NET (scheduling)
+ MassTransit + RabbitMQ/Azure Service Bus (queue consumption)
+ EF Core 8 + PostgreSQL + Serilog + HealthChecks (HTTP probe)
+ Docker (Linux container) + xUnit + Moq + NuGet
Architecture: /Workers (IHostedService: scheduled + consumer) / /Jobs (Quartz)
/ /Consumers (MassTransit) / /Services (business logic) / /Data (repos)
/ /Infrastructure/Messaging + Scheduling
Foundation: Program.cs (host builder), Infrastructure/Messaging/MassTransitConfig.cs,
Infrastructure/Scheduling/QuartzConfig.cs, Dockerfile, docker-compose.yml
CI: GitHub Actions → test → build → push Docker image
Use cases: Report generation, data sync, email dispatch, queue processors, cron jobs

**9. templates/data-pipeline/README.md**
Platform: Data pipeline / ETL / data integration
Two variants (selected at init):
  Variant A (.NET 8): Worker Service + Channels + CsvHelper + Dapper + Quartz.NET + MassTransit
  Variant B (Python 3.12): Prefect or Airflow + Polars (DataFrames) + SQLAlchemy 2.0 async
  + Celery + Redis + structlog
Shared: SQLite (dead-letter buffer) + InfluxDB/TimescaleDB (time-series) + Grafana
+ OpenTelemetry metrics + GitHub Actions CI
Architecture: /Pipelines (one pipeline = one DCM use case)
/ /Extractors (DB, file, API, FTP) / /Transformers / /Loaders (DB, file, API)
/ /Validators (row-level) / /Monitoring (run history, metrics, alerting)
Foundation: Infrastructure/Scheduling/, Infrastructure/Alerting/,
Monitoring/PipelineRunRepository.cs
Use cases: CSV/Excel imports, DB-to-DB sync, ERP data exchange, SAP/DATEV integration

---

### GROUP D: Mobile / Cross-Platform

**10. templates/maui-crossplatform/README.md**
Platform: iOS + Android + Windows + macOS (single codebase)
Stack: .NET 8 + .NET MAUI + CommunityToolkit.Mvvm + Refit (typed REST) + HttpClientFactory
+ MSAL.NET or custom JWT + SQLite-net-pcl + Microsoft.Maui.Storage.SecureStorage
+ Microsoft.Extensions.DI + Serilog + Plugin.Firebase.CloudMessaging
+ xUnit + Moq + NuGet
Architecture: MauiProgram.cs (DI) + AppShell.xaml (navigation) + /Views (XAML)
+ /ViewModels + /Models + /Services + /Data (SQLite repos)
+ /Platform/Android, iOS, Windows, MacCatalyst (OS-specific implementations)
+ /Resources (fonts, images, styles)
Foundation: MauiProgram.cs, Platform/ bootstrapping, Services/Interfaces/IAuthService.cs
CI: GitHub Actions matrix (android → APK/AAB, ios → IPA, windows → MSIX)
Use cases: Enterprise mobile apps on Microsoft stack, cross-platform with Windows support

---

### GROUP E: Specialized / Emerging

**11. templates/ai-agent-dotnet/README.md**
Platform: AI agent orchestration / LLM-backed application
Stack: .NET 8 + ASP.NET Core Minimal API + Microsoft Semantic Kernel
+ OpenAI / Azure OpenAI / Anthropic Claude (provider abstraction)
+ Qdrant or pgvector (vector store, selected at init) + EF Core 8 + PostgreSQL
+ RabbitMQ (long-running async agent tasks) + SSE (token streaming)
+ JWT Bearer + Serilog + OpenTelemetry + Docker + xUnit + NuGet
Architecture: /Agents (SK planners / orchestrators) / /Tools (SK plugins = agent-callable functions)
/ /Skills (prompt templates) / /Features (API endpoints, vertical slices)
/ /Memory (vector store operations) / /Domain (conversation, session, document entities)
/ /Infrastructure/LLM (provider abstraction, retry, fallback) + Streaming (SSE helpers)
Foundation: Program.cs (SK + DI), Infrastructure/LLM/KernelFactory.cs,
Infrastructure/Streaming/SseHelper.cs
Use cases: RAG systems, AI assistants, document chat, code generation APIs,
ADVL-style AI development tools

**12. templates/iot-edge/README.md**
Platform: IoT device / edge computing (Linux ARM or x64)
Two variants (selected at init):
  Variant A (.NET 8 IoT): .NET IoT Libraries + MQTTnet + SQLite + Quartz.NET + Serilog
  Variant B (Python 3.12): RPi.GPIO/gpiozero + paho-mqtt + SQLite + APScheduler + structlog
Shared: MQTT → Azure IoT Hub / AWS IoT Core / Mosquitto + InfluxDB (cloud time-series)
+ Grafana + systemd service + OTA update agent (GitHub Releases) + GitHub Actions (ARM cross-compile)
Architecture: /Sensors (hardware abstraction + Mock) / /Actuators / /Telemetry (local buffer)
/ /Mqtt (client + message serialization) / /Services / /Data (SQLite repo)
/ /Updates (OTA agent) / /Infrastructure
Foundation: Infrastructure/Config/, Mqtt/MqttClientService.cs,
Updates/OtaUpdateAgent.cs, systemd/iot-app.service
Use cases: Industrial sensors, smart home devices, manufacturing monitoring,
Amadeus's 3D printer telemetry and smart home automation projects

**13. templates/tauri-desktop/README.md**
Platform: Windows + macOS + Linux (lightweight, no bundled Node runtime)
Stack: Tauri 2 + TypeScript 5 + React 18 + Vite + Tailwind CSS 4 + Zustand
+ Rust (Tauri backend commands) + SQLite (via tauri-plugin-sql) + tauri-plugin-store
+ tauri-updater + Vitest + pnpm
Architecture: /src-tauri (Rust backend: commands, state, plugins)
+ /src (React frontend: features, components, IPC invoke wrappers)
+ Typed Tauri command protocol (TypeScript ↔ Rust)
Foundation: src-tauri/src/main.rs (Tauri builder), src-tauri/tauri.conf.json (permissions),
src/ipc/ (typed command wrappers)
CI: GitHub Actions matrix (win/mac/linux) → sign → GitHub Releases
Use cases: Lightweight desktop tools where bundle size matters, cross-platform CLI+GUI hybrids

**14. templates/blazor-wasm/README.md**
Platform: Browser SPA or Blazor Hybrid (PWA-capable)
Stack: .NET 8 + Blazor WebAssembly + MudBlazor or Radzen components
+ EF Core 8 (API backend, ASP.NET Core) + JWT Bearer + Serilog
+ SignalR (real-time) + xUnit + bUnit (Blazor component testing) + NuGet
Architecture: Solution with two projects: /Client (Blazor WASM: /Pages, /Components,
/Services/Interfaces, /Store) + /Server (ASP.NET Core API: /Features vertical slices,
/Infrastructure) + /Shared (DTOs, validation, contracts)
Foundation: Client/Program.cs (WASM startup), Server/Program.cs (API pipeline),
Shared/Contracts/ (shared types)
CI: GitHub Actions → build Client → publish Server (hosts Client as static files)
Use cases: .NET teams building web UIs without JavaScript frameworks,
internal tools, Blazor Hybrid (MAUI-hosted SPA)

---

## After Creating All Templates

### 1. Update /templates directory listing in README.md

Add a "Templates" section to the root README.md listing all 14 new templates
alongside the existing 4, in this format:

| Template ID | Platform | Primary Stack |
|---|---|---|
| web-nextjs | Web SPA | Next.js 15 + Supabase + Vercel |
| web-fastapi-react | Web + API | FastAPI + React + PostgreSQL |
| mobile-expo | iOS + Android | Expo + Supabase |
| fullstack-cloud | Cloud native | Next.js + Turborepo + K8s |
| desktop-wpf | Windows desktop | .NET 8 + WPF + MVVM |
| desktop-avalonia | Cross-platform desktop | .NET 8 + Avalonia UI 11 |
| desktop-electron | Cross-platform desktop | Electron 32 + React + TypeScript |
| vscode-extension | VS Code extension | TypeScript + VS Code API + React |
| browser-extension | Chrome/Edge/Firefox | TypeScript + MV3 + React |
| api-dotnet-minimal | REST API / Microservice | .NET 8 + Minimal API + Vertical Slice |
| microservices-dotnet | Distributed system | .NET 8 + YARP + gRPC + K8s |
| worker-service | Background worker | .NET 8 + Quartz.NET + MassTransit |
| data-pipeline | ETL / Data integration | .NET 8 or Python + Polars |
| maui-crossplatform | iOS + Android + Windows | .NET MAUI + CommunityToolkit |
| ai-agent-dotnet | AI orchestration | .NET 8 + Semantic Kernel + LLMs |
| iot-edge | IoT / Edge | .NET IoT or Python + MQTT |
| tauri-desktop | Lightweight desktop | Tauri 2 + Rust + React |
| blazor-wasm | Browser SPA / Hybrid | .NET 8 + Blazor WASM + MudBlazor |

### 2. Update AGENTS.md

Add a "Template Selection" section under the ADVL Init Flow, referencing the
expanded template list. Add this after the existing "Initialize" section:

```
**Available Templates (Step 1 — Platform Selection)**

When a user initializes a new ADVL project, present this selection matrix:

Desktop:
  [ ] desktop-wpf          — Windows-only rich client (.NET 8 + WPF)
  [ ] desktop-avalonia     — Cross-platform desktop (.NET 8 + Avalonia)
  [ ] desktop-electron     — JS-based cross-platform (Electron + React)
  [ ] tauri-desktop        — Lightweight cross-platform (Tauri + Rust + React)

Web:
  [ ] web-nextjs            — Full-stack web (Next.js + Supabase + Vercel)
  [ ] web-fastapi-react     — API + React (FastAPI + Python backend)
  [ ] blazor-wasm           — .NET SPA (Blazor WebAssembly + ASP.NET API)

Mobile:
  [ ] mobile-expo           — React Native (iOS + Android)
  [ ] maui-crossplatform    — .NET MAUI (iOS + Android + Windows + macOS)

Extensions:
  [ ] vscode-extension      — VS Code extension
  [ ] browser-extension     — Chrome/Edge/Firefox extension (MV3)

Backend / Services:
  [ ] api-dotnet-minimal    — Microservice or BFF (.NET 8 Minimal API)
  [ ] microservices-dotnet  — Multi-service distributed (.NET 8 + K8s)
  [ ] worker-service        — Background worker / daemon (.NET 8)
  [ ] data-pipeline         — ETL / data integration (.NET or Python)
  [ ] fullstack-cloud       — Full cloud-native (Next.js + Turborepo + K8s)

Specialized:
  [ ] ai-agent-dotnet       — AI agent / LLM orchestration (.NET + Semantic Kernel)
  [ ] iot-edge              — IoT / edge device (.NET IoT or Python + MQTT)
```

### 3. Create DCM Snapshot

Create /schema/snapshots/DCM_v1.1_[today's date].yaml as a copy of the current
DCM.yaml and add the snapshot to the snapshots index in DCM.yaml:

```yaml
- version: "1.1"
  date: "[YYYY-MM-DD]"
  milestone: "Added 14 new stack templates — total 18 templates covering all major platforms"
  file: "schema/snapshots/DCM_v1.1_[YYYY-MM-DD].yaml"
```

Also bump DCM.yaml version from "1.0" to "1.1" and update last_updated.

---

## Compliance Check Before Delivery

Before finalizing:

- [ ] CORE_RULES: All 14 template folders created with complete README.md
- [ ] NO_DUPLICATE: No template ID conflicts with existing templates
- [ ] USE_CASE_FIRST: UC-001 registered in DCM before any files created
- [ ] META_INJECTION: No visual elements in this task — N/A
- [ ] STACK_RULES: No new application dependencies introduced (documentation only)
- [ ] NO_FAKE: All README content is accurate and implementable — no placeholder stacks

---

## Response Format Required

Follow AGENTS.md Rule 10 format:

## ADVL Agent Response

### Use Case Reference
UC-001: Developer initializes a new project from an ADVL stack template — [value]

### DCM Check
[NEW | REUSE]: [what was found or registered]

### Implementation
[List of files created]

### DCM Update
[Exact YAML added to DCM.yaml]

### Compliance Check
[All checkboxes with pass/fail]

### Decisions Made
[Any non-obvious choices about template stack decisions]
```

---

*This prompt was generated by Claude for ADVL (AI Development Visual Language)*
*Author: Amadeus Lederle / IEX Labs UG (haftungsbeschränkt)*
*Date: 2026-02-27*
